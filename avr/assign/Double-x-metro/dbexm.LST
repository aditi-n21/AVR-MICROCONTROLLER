C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE DBEXM
OBJECT MODULE PLACED IN dbexm.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE dbexm.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg51.h>
   2          #include<string.h>
   3          
   4          #define lcd P1
   5          #define seg P0
   6          sbit buzz=P2^5;
   7          sbit ledf=P2^6;
   8          sbit ledb=P2^7;
   9          sbit emsw=P3^2;   // emergency sw
  10          
  11          
  12          sbit en=P3^3;
  13          sbit rs=P3^5;
  14          sbit rw=P3^4;
  15          
  16          sbit sense=P2^4;   // entry check
  17          sbit sw=P3^6;                   // exit
  18          sbit rotor_a = P2^0;
  19          sbit rotor_b = P2^1;
  20          sbit rotor_c = P2^2;
  21          sbit rotor_d = P2^3;
  22          
  23          sbit enter=P3^0;   //inc
  24          sbit sw1=P3^1;     
  25          
  26          void lcd_init(void);
  27          void lcd_cmd(unsigned char);
  28          void lcd_data(unsigned char);
  29          void delay(unsigned char);
  30          void lcd_str(unsigned char *s);
  31          void stepperf(unsigned char);
  32          void stepperb(unsigned char);
  33          
  34          unsigned char num[]={0xc0,0x0f9,0x0a4,0x0b0,0x99,0x92,0x82,0x0f8,0x80,0x90};
  35          unsigned char cnt,time,count=0;
  36          
  37          void external0(void) interrupt 0
  38          {
  39   1      buzz=0;
  40   1      delay(50);
  41   1              buzz=1;
  42   1      }
  43          void timer0(void) interrupt 1
  44          {
  45   1        
  46   1      time--;
  47   1      //      TF0=0;
  48   1      }
  49          
  50          void lcd_cmd(unsigned char z)
  51          {
  52   1      lcd=z;
  53   1      rs=0;
  54   1      rw=0;
  55   1      en=1;
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 2   

  56   1      delay(5);
  57   1      en=0;
  58   1      }
  59          void lcd_data(unsigned char z)
  60          {
  61   1      lcd=z;
  62   1      rs=1;
  63   1      rw=0;
  64   1      en=1;
  65   1      delay(5);
  66   1      en=0;
  67   1      }
  68          void lcd_init(void)
  69          {
  70   1      lcd_cmd(0x38);
  71   1      lcd_cmd(0x01);
  72   1      lcd_cmd(0x0e);
  73   1      lcd_cmd(0x06);
  74   1      lcd_cmd(0x80);
  75   1      }
  76          
  77          void lcd_str(unsigned char *s)
  78          {
  79   1      unsigned l,i;
  80   1      l=strlen(s);
  81   1      for(i=0;i<l;i++)
  82   1      {
  83   2      lcd_data(*s);
  84   2      s++;
  85   2      }
  86   1      }
  87          void delay(unsigned char t)
  88          {
  89   1      unsigned int i,j;
  90   1      for(i=0;i<t;i++)
  91   1      for(j=0;j<1275;j++);
  92   1      }
  93          void stepperf(unsigned char msec)
  94          {
  95   1              unsigned int i;
  96   1              for(i=0;i<msec;i++)
  97   1                      {
  98   2                              rotor_a=1;
  99   2      rotor_b=0;
 100   2      rotor_c=0;
 101   2      rotor_d=0;
 102   2                              delay(10);
 103   2                              rotor_a=0;
 104   2      rotor_b=1;
 105   2      rotor_c=0;
 106   2      rotor_d=0;
 107   2                              delay(10);
 108   2                              rotor_a=0;
 109   2      rotor_b=0;
 110   2      rotor_c=1;
 111   2      rotor_d=0;
 112   2                              delay(10);
 113   2                              rotor_a=0;
 114   2      rotor_b=0;
 115   2      rotor_c=0;
 116   2      rotor_d=1;
 117   2                              delay(10);
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 3   

 118   2                      }
 119   1      }
 120          void stepperb(unsigned char msec)
 121          {
 122   1              unsigned int i;
 123   1              for(i=0;i<msec;i++)
 124   1                      {
 125   2                              rotor_a=0;
 126   2      rotor_b=0;
 127   2      rotor_c=0;
 128   2      rotor_d=1;
 129   2                              delay(10);
 130   2                              rotor_a=0;
 131   2      rotor_b=0;
 132   2      rotor_c=1;
 133   2      rotor_d=0;
 134   2                              delay(10);
 135   2                              rotor_a=0;
 136   2      rotor_b=1;
 137   2      rotor_c=0;
 138   2      rotor_d=0;
 139   2                              delay(10);
 140   2                              rotor_a=1;
 141   2      rotor_b=0;
 142   2      rotor_c=0;
 143   2      rotor_d=0;
 144   2                              delay(10);
 145   2                      }
 146   1      }
 147          void main()
 148          {
 149   1      unsigned char arr[10],x,y;
 150   1      lcd_init();
 151   1      IE=0x83;
 152   1      TMOD=0x02;
 153   1      TH0=0xd2;
 154   1      IP=0x01;
 155   1      ledf=1;
 156   1      ledb=1;
 157   1      buzz=1;
 158   1      emsw=1;
 159   1      sw=1;
 160   1      sw1=1;
 161   1      enter=1;
 162   1      time=255;
 163   1      seg=num[cnt];
 164   1      lcd_cmd(0x01);
 165   1      lcd_str("WELCOME TO ALL");
 166   1      while(1)
 167   1      {       ledf=0;
 168   2           ledb=1;
 169   2               lcd_cmd(0x01);
 170   2          lcd_cmd(0x80);
 171   2              lcd_str("STATION CODES:-");
 172   2          lcd_cmd(0xc0);
 173   2                      lcd_str("RKSH-01  HW-02 ");
 174   2                              delay(50);
 175   2                      lcd_cmd(0x01);
 176   2          lcd_cmd(0x80);
 177   2              lcd_str("COER-03 RK-04 ");
 178   2          lcd_cmd(0xc0);
 179   2                      lcd_str("SRE-05");
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 4   

 180   2                      delay(50);
 181   2                      lcd_cmd(0x01);
 182   2          lcd_cmd(0x80);
 183   2              lcd_str("CURRENT STATION");
 184   2          lcd_cmd(0xc0);
 185   2                      lcd_str("Rishikesh");
 186   2                      while(time>0)
 187   2                      {
 188   3                              TR0=1;
 189   3                              x=time/10;
 190   3                              y=time%10;
 191   3                              lcd_cmd(0xcb);
 192   3                              lcd_data(x+48);
 193   3                              lcd_data(y+48);
 194   3                              if(sense==0)
 195   3                                      {  
 196   4                                              if(cnt<9)
 197   4                                                      cnt++;
 198   4                                              else
 199   4                                              {
 200   5                                              lcd_cmd(0x01);
 201   5                                              lcd_cmd(0x80);
 202   5                                              lcd_str("FULL");
 203   5                                              buzz=0;
 204   5                                              }
 205   4                                      //seg=num[cnt];
 206   4                                              lcd_cmd(0x01);
 207   4                                              lcd_cmd(0x82);
 208   4                                              lcd_str("Enter Station code");
 209   4                                              lcd_cmd(0xc0);
 210   4                                              lcd_str("Press key :-");
 211   4                              
 212   4                                              while(sw1==1)
 213   4                                              {
 214   5                                              if(enter==0)
 215   5                                                      {
 216   6                                                      if(count<5)
 217   6                                                      {       
 218   7                                                              count++;
 219   7                                                              x=count/10;
 220   7                                                              y=count%10;
 221   7                                                              lcd_cmd(0xce);
 222   7                                                              lcd_data(x+48);
 223   7                                                              lcd_data(y+48);
 224   7                                                              delay(50);
 225   7                                                              
 226   7                                                      }
 227   6                                                      else
 228   6                                                      {
 229   7                                                              count=0;
 230   7      
 231   7                                                      }
 232   6                                                      }
 233   5                                                
 234   5                                              }
 235   4                                                      lcd_cmd(0x01);
 236   4                                                      lcd_cmd(0x80);
 237   4              lcd_str("CURRENT STATION");
 238   4          lcd_cmd(0xc0);
 239   4                      lcd_str("Rishikesh");
 240   4                                      }
 241   3                              if(sw==0)
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 5   

 242   3                                      {
 243   4                                              if(cnt>0)
 244   4                                                      cnt--;
 245   4                       /*else
 246   4                       {
 247   4                        lcd_cmd(0x01);
 248   4           lcd_cmd(0x80);
 249   4              lcd_str("EMPTY");
 250   4                       }*/
 251   4                                      }
 252   3                              seg=num[cnt];   
 253   3              // delay(100);
 254   3               
 255   3                              }
 256   2                              arr[cnt]=count;
 257   2                              count=0;
 258   2                              TR0=0;
 259   2                              time=255;
 260   2                              buzz=0;
 261   2                              delay(10);
 262   2                              buzz=1;
 263   2                              lcd_cmd(0x01);
 264   2                              lcd_cmd(0x80);
 265   2                              lcd_str("NEXT STATION");
 266   2                              lcd_cmd(0xc0);
 267   2                              lcd_str("Haridwar");
 268   2                              stepperf(20);
 269   2      //      delay(10);
 270   2                              lcd_cmd(0x01);
 271   2                              lcd_cmd(0x80);
 272   2                              lcd_str("CURRENT STATION");
 273   2                              lcd_cmd(0xc0);
 274   2                              lcd_str("Haridwar");
 275   2                              while(time>0)
 276   2                              {
 277   3                                      TR0=1;
 278   3                                      x=time/10;
 279   3                                      y=time%10;
 280   3                              lcd_cmd(0xcb);
 281   3                              lcd_data(x+48);
 282   3                              lcd_data(y+48);
 283   3                              if(sense==0)
 284   3                                      {  
 285   4                                              if(cnt<9)
 286   4                                                      cnt++;
 287   4                                      else
 288   4                                              {
 289   5                                                      lcd_cmd(0x01);
 290   5                                                      lcd_cmd(0x80);
 291   5                                                      lcd_str("FULL");
 292   5                                                      buzz=0;
 293   5                                              }
 294   4                                 lcd_cmd(0x01);
 295   4                                 lcd_cmd(0x82);
 296   4                                 lcd_str("Enter Station code");
 297   4                                 lcd_cmd(0xc0);
 298   4                                 lcd_str("Press key :-");
 299   4                               
 300   4                              while(sw1==1)
 301   4                                      {
 302   5                                      if(enter==0)
 303   5                                              {
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 6   

 304   6                                              if(count<5)
 305   6                                              {
 306   7                                                      count++;
 307   7                                                      x=count/10;
 308   7                                                      y=count%10;
 309   7                                                      lcd_cmd(0xce);
 310   7                                                      lcd_data(x+48);
 311   7                                                      lcd_data(y+48);
 312   7                                                      delay(50);
 313   7                                                              
 314   7                                              }
 315   6                                              else
 316   6                                              {
 317   7                                                      count=0;
 318   7                                              }
 319   6                                              }
 320   5                                        
 321   5                                      }
 322   4                                      lcd_cmd(0x01);
 323   4                                              lcd_cmd(0x80);
 324   4                              lcd_str("CURRENT STATION");
 325   4                              lcd_cmd(0xc0);
 326   4                              lcd_str("Haridwar");
 327   4                                       //seg=num[cnt];
 328   4                                      }
 329   3                                      if(sw==0)
 330   3                                              {        
 331   4                                                      if(cnt>0)
 332   4                                                              cnt--;
 333   4                       /*else
 334   4                       {
 335   4                        lcd_cmd(0x01);
 336   4           lcd_cmd(0x80);
 337   4              lcd_str("EMPTY");
 338   4                       }*/
 339   4                                              }
 340   3                                      seg=num[cnt];
 341   3                      
 342   3                              // delay(10);
 343   3                              }
 344   2                              arr[cnt]=count;
 345   2                              count=0;
 346   2                                      TR0=0;
 347   2                                      time=255;
 348   2                                      buzz=0;
 349   2                                      delay(10);
 350   2                                      buzz=1;
 351   2                                      lcd_cmd(0x01);
 352   2                                      lcd_cmd(0x80);
 353   2                                      lcd_str("NEXT STATION");
 354   2                                      lcd_cmd(0xc0);
 355   2                                      lcd_str("COER");
 356   2                                      stepperf(19);
 357   2                              //delay(10);
 358   2                                      lcd_cmd(0x01);
 359   2                                      lcd_cmd(0x80);
 360   2                                      lcd_str("CURRENT STATION");
 361   2                                      lcd_cmd(0xc0);
 362   2                                      lcd_str("COER");
 363   2                                      while(time>0)
 364   2                                              {
 365   3                                                      TR0=1;
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 7   

 366   3                                              x=time/10;
 367   3                      
 368   3                              y=time%10;
 369   3                              lcd_cmd(0xcb);
 370   3                              lcd_data(x+48);
 371   3                                      lcd_data(y+48);
 372   3      
 373   3                                                      if(sense==0)
 374   3                                                              {  
 375   4                                                                      if(cnt<9)
 376   4                                                                              cnt++;
 377   4                                                                      else
 378   4                                                                      {
 379   5                                                                      lcd_cmd(0x01);
 380   5                                                                      lcd_cmd(0x80);
 381   5                                                                      lcd_str("FULL");
 382   5                                                                      buzz=0;
 383   5                                                                      }
 384   4                                                                              lcd_cmd(0x01);
 385   4                lcd_cmd(0x82);
 386   4                lcd_str("Enter Station code");
 387   4                      lcd_cmd(0xc0);
 388   4                lcd_str("Press key :-");
 389   4                
 390   4                              while(sw1==1)
 391   4                      {
 392   5                              if(enter==0)
 393   5                              {
 394   6                              if(count<5)
 395   6                              {       count++;
 396   7                                              x=count/10;
 397   7              y=count%10;
 398   7              lcd_cmd(0xce);
 399   7              lcd_data(x+48);
 400   7        lcd_data(y+48);
 401   7                                              delay(50);
 402   7                                              
 403   7                              }
 404   6                              else
 405   6                              {
 406   7                              count=0;
 407   7                              }
 408   6                              }
 409   5              }
 410   4              lcd_cmd(0x01);
 411   4                                      lcd_cmd(0x80);
 412   4                                      lcd_str("CURRENT STATION");
 413   4                                      lcd_cmd(0xc0);
 414   4                                      lcd_str("COER");
 415   4                                                              //seg=num[cnt];
 416   4                                                      }
 417   3                                              if(sw==0)
 418   3                                                      {       
 419   4                                                              if(cnt>0)
 420   4                                                              cnt--;
 421   4                       /*else
 422   4                       {
 423   4                        lcd_cmd(0x01);
 424   4           lcd_cmd(0x80);
 425   4              lcd_str("EMPTY");
 426   4                       }*/
 427   4                                                      }
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 8   

 428   3                                                      seg=num[cnt];
 429   3                      
 430   3              // delay(10);
 431   3                                      }
 432   2                              arr[cnt]=count;
 433   2                              count=0;
 434   2                                      TR0=0;
 435   2                                      time=255;
 436   2                                      buzz=0;
 437   2                                      delay(10);
 438   2                                      buzz=1;
 439   2                                      lcd_cmd(0x01);
 440   2                                      lcd_cmd(0x80);
 441   2                                      lcd_str("NEXT STATION");
 442   2                                      lcd_cmd(0xc0);
 443   2                                      lcd_str("Roorkee");
 444   2                                      stepperf(7);
 445   2                              //delay(10);
 446   2                                      lcd_cmd(0x01);
 447   2                                      lcd_cmd(0x80);
 448   2                                      lcd_str("CURRENT STATION");
 449   2                                      lcd_cmd(0xc0);
 450   2                                      lcd_str("Roorkee");
 451   2                                      while(time>0)
 452   2                                              {
 453   3                                                      TR0=1;
 454   3                                              x=time/10;
 455   3                      
 456   3                              y=time%10;
 457   3                              lcd_cmd(0xcb);
 458   3                              lcd_data(x+48);
 459   3                                      lcd_data(y+48);
 460   3      
 461   3                                                      if(sense==0)
 462   3                                                              {  
 463   4                                                                      if(cnt<9)
 464   4                                                                              cnt++;
 465   4                                                                      else
 466   4                                                                      {
 467   5                                                                      lcd_cmd(0x01);
 468   5                                                                      lcd_cmd(0x80);
 469   5                                                                      lcd_str("FULL");
 470   5                                                                      buzz=0;
 471   5                                                                      }
 472   4                                                                              lcd_cmd(0x01);
 473   4                lcd_cmd(0x82);
 474   4                lcd_str("Enter Station code");
 475   4                      lcd_cmd(0xc0);
 476   4                lcd_str("Press key :-");
 477   4               
 478   4                              while(sw1==1)
 479   4                      {
 480   5                              if(enter==0)
 481   5                              {
 482   6                              if(count<5)
 483   6                              {       count++;
 484   7                                              x=count/10;
 485   7              y=count%10;
 486   7              lcd_cmd(0xce);
 487   7              lcd_data(x+48);
 488   7        lcd_data(y+48);
 489   7                                              delay(50);
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 9   

 490   7                                              
 491   7                              }
 492   6                              else
 493   6                              {
 494   7                              count=0;
 495   7                              }
 496   6                              }
 497   5                      
 498   5      }
 499   4                         lcd_cmd(0x01);
 500   4                                      lcd_cmd(0x80);
 501   4                                      lcd_str("CURRENT STATION");
 502   4                                      lcd_cmd(0xc0);
 503   4                                      lcd_str("Roorkee");
 504   4                                                              //seg=num[cnt];
 505   4                                                      }
 506   3                                              if(sw==0)
 507   3                                                      {       
 508   4                                                              if(cnt>0)
 509   4                                                              cnt--;
 510   4                       /*else
 511   4                       {
 512   4                        lcd_cmd(0x01);
 513   4           lcd_cmd(0x80);
 514   4              lcd_str("EMPTY");
 515   4                       }*/
 516   4                                                      }
 517   3                                                      seg=num[cnt];
 518   3                      
 519   3              // delay(10);
 520   3                                      }
 521   2                              arr[cnt]=count;
 522   2                              count=0;
 523   2                                      TR0=0;
 524   2                                      time=255;
 525   2                                      buzz=0;
 526   2                                      delay(10);
 527   2                                      buzz=1;
 528   2                                      lcd_cmd(0x01);
 529   2                                      lcd_cmd(0x80);
 530   2                                      lcd_str("NEXT STATION");
 531   2                                      lcd_cmd(0xc0);
 532   2                                      lcd_str("Saharanpur");
 533   2                                      stepperf(36);
 534   2                              //delay(10);
 535   2                                      lcd_cmd(0x01);
 536   2                                      lcd_cmd(0x80);
 537   2                                      lcd_str("CURRENT STATION");
 538   2                                      lcd_cmd(0xc0);
 539   2                                      lcd_str("Saharanpur");
 540   2                                      while(time>0)
 541   2                                              {
 542   3                                                      TR0=1;
 543   3                                              x=time/10;
 544   3                                              y=time%10;
 545   3                              lcd_cmd(0xcb);
 546   3                              lcd_data(x+48);
 547   3                                              lcd_data(y+48);
 548   3                                                      if(sense==0)
 549   3                                                              {  
 550   4                                                                      if(cnt<9)
 551   4                                                                              cnt++;
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 10  

 552   4                                                                      else
 553   4                                                                      {
 554   5                                                                      lcd_cmd(0x01);
 555   5                                                                      lcd_cmd(0x80);
 556   5                                                                      lcd_str("FULL");
 557   5                                                                      buzz=0;
 558   5                                                                      }
 559   4                                                                              lcd_cmd(0x01);
 560   4                lcd_cmd(0x82);
 561   4                lcd_str("Enter Station code");
 562   4                      lcd_cmd(0xc0);
 563   4                lcd_str("Press key :-");
 564   4                              while(sw1==1)
 565   4                      {
 566   5                              if(enter==0)
 567   5                              {
 568   6                              if(count<5)
 569   6                              {       count++;
 570   7                                              x=count/10;
 571   7              y=count%10;
 572   7              lcd_cmd(0xce);
 573   7              lcd_data(x+48);
 574   7        lcd_data(y+48);
 575   7                                              delay(50);
 576   7                                              
 577   7                              }
 578   6                              else
 579   6                              {
 580   7                              count=0;
 581   7                              }
 582   6                              }
 583   5                       }
 584   4              lcd_cmd(0x01);
 585   4                                      lcd_cmd(0x80);
 586   4                                      lcd_str("CURRENT STATION");
 587   4                                      lcd_cmd(0xc0);
 588   4                                      lcd_str("Saharanpur");
 589   4                                      //seg=num[cnt];
 590   4                                                      }
 591   3                                              if(sw==0)
 592   3                                                      {       
 593   4                                                              if(cnt>0)
 594   4                                                              cnt--;
 595   4                       /*else
 596   4                       {
 597   4                        lcd_cmd(0x01);
 598   4           lcd_cmd(0x80);
 599   4              lcd_str("EMPTY");
 600   4                       }*/
 601   4                                                      }
 602   3                                                      seg=num[cnt];
 603   3                               
 604   3              // delay(10);
 605   3                                      }
 606   2                                      arr[cnt]=count;
 607   2                                      count=0;
 608   2                                      TR0=0;
 609   2                                      time=255;       
 610   2                                      buzz=0;
 611   2                                      delay(10);
 612   2                                      buzz=1;
 613   2                                      ledf=1;
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 11  

 614   2                                      ledb=0;
 615   2                                      lcd_cmd(0x01);
 616   2                                      lcd_cmd(0x80);
 617   2                                      lcd_str("NEXT STATION");
 618   2                                      lcd_cmd(0xc0);
 619   2                                      lcd_str("Roorkee");
 620   2                                      stepperb(36);
 621   2              //      delay(10);
 622   2                                      lcd_cmd(0x01);
 623   2                                      lcd_cmd(0x80);
 624   2                                      lcd_str("CURRENT STATION");
 625   2                                      lcd_cmd(0xc0);
 626   2                                      lcd_str("Roorkee");
 627   2                                      while(time>0)
 628   2                                              {
 629   3                                                      TR0=1;
 630   3                                                      x=time/10;
 631   3                      
 632   3                              y=time%10;
 633   3                              lcd_cmd(0xcb);
 634   3                              lcd_data(x+48);
 635   3                                      lcd_data(y+48);
 636   3                                                      if(sense==0)
 637   3                                                      {  
 638   4                                                              if(cnt<9)
 639   4                                                                      cnt++;
 640   4                                                              else
 641   4                                                              {
 642   5                                                                      lcd_cmd(0x01);
 643   5                                                                      lcd_cmd(0x80);
 644   5                                                                      lcd_str("FULL");
 645   5                                                                      buzz=0;
 646   5                                       //delay(10);
 647   5                                                              }       lcd_cmd(0x01);
 648   4                lcd_cmd(0x82);
 649   4                lcd_str("Enter Station code");
 650   4                      lcd_cmd(0xc0);
 651   4                lcd_str("Press key :-");
 652   4                              while(sw1==1)
 653   4                      {
 654   5                              if(enter==0)
 655   5                              {
 656   6                              if(count<5)
 657   6                              {       count++;
 658   7                                              x=count/10;
 659   7              y=count%10;
 660   7              lcd_cmd(0xce);
 661   7              lcd_data(x+48);
 662   7        lcd_data(y+48);
 663   7                                              delay(50);
 664   7                                                      
 665   7                              }
 666   6                              else
 667   6                              {
 668   7                              count=0;
 669   7                              }
 670   6                              }
 671   5              
 672   5        }
 673   4        lcd_cmd(0x01);
 674   4                                      lcd_cmd(0x80);
 675   4                                      lcd_str("CURRENT STATION");
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 12  

 676   4                                      lcd_cmd(0xc0);
 677   4                                      lcd_str("Roorkee");
 678   4                               //seg=num[cnt];
 679   4                                                      }
 680   3                                              if(sw==0)
 681   3                                              {       
 682   4                                                      if(cnt>0)
 683   4                                                              cnt--;
 684   4                      /* else
 685   4                       {
 686   4                        lcd_cmd(0x01);
 687   4           lcd_cmd(0x80);
 688   4              lcd_str("EMPTY");
 689   4                       }*/
 690   4                                              }
 691   3                                              seg=num[cnt];
 692   3                      
 693   3              // delay(10);
 694   3                              }
 695   2                              
 696   2                                      arr[cnt]=count;
 697   2                                      count=0;
 698   2                                      TR0=0;
 699   2                                      time=255;       
 700   2                                      buzz=0;
 701   2                                      delay(10);
 702   2                                      buzz=1;
 703   2                                      ledf=1;
 704   2                                      ledb=0;
 705   2                                      lcd_cmd(0x01);
 706   2                                      lcd_cmd(0x80);
 707   2                                      lcd_str("NEXT STATION");
 708   2                                      lcd_cmd(0xc0);
 709   2                                      lcd_str("COER");
 710   2                                      stepperb(7);
 711   2              //      delay(10);
 712   2                                      lcd_cmd(0x01);
 713   2                                      lcd_cmd(0x80);
 714   2                                      lcd_str("CURRENT STATION");
 715   2                                      lcd_cmd(0xc0);
 716   2                                      lcd_str("COER");
 717   2                                      while(time>0)
 718   2                                              {
 719   3                                                      TR0=1;
 720   3                                              x=time/10;
 721   3                      
 722   3                              y=time%10;
 723   3                              lcd_cmd(0xcb);
 724   3                              lcd_data(x+48);
 725   3                              
 726   3                              lcd_data(y+48);
 727   3      
 728   3                                                      if(sense==0)
 729   3                                                      {  
 730   4                                                              if(cnt<9)
 731   4                                                                      cnt++;
 732   4                                                              else
 733   4                                                              {
 734   5                                                                      lcd_cmd(0x01);
 735   5                                                                      lcd_cmd(0x80);
 736   5                                                                      lcd_str("FULL");
 737   5                                                                      buzz=0;
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 13  

 738   5                                       //delay(10);
 739   5                                                              }       lcd_cmd(0x01);
 740   4                lcd_cmd(0x82);
 741   4                lcd_str("Enter Station code");
 742   4                      lcd_cmd(0xc0);
 743   4                lcd_str("Press key :-");
 744   4                              while(sw1==1)
 745   4                      {
 746   5                              if(enter==0)
 747   5                              {
 748   6                              if(count<5)
 749   6                              {       count++;
 750   7                                              x=count/10;
 751   7              y=count%10;
 752   7              lcd_cmd(0xce);
 753   7              lcd_data(x+48);
 754   7        lcd_data(y+48);
 755   7                                              delay(50);
 756   7                                              
 757   7                              }
 758   6                              else
 759   6                              {
 760   7                              count=0;
 761   7                              }
 762   6                              }
 763   5                      }
 764   4                                      lcd_cmd(0x01);
 765   4                                      lcd_cmd(0x80);
 766   4                                      lcd_str("CURRENT STATION");
 767   4                                      lcd_cmd(0xc0);
 768   4                                      lcd_str("COER");
 769   4                       //seg=num[cnt];
 770   4                                                      }
 771   3                                              if(sw==0)
 772   3                                              {       
 773   4                                                      if(cnt>0)
 774   4                                                              cnt--;
 775   4                      /* else
 776   4                       {
 777   4                        lcd_cmd(0x01);
 778   4           lcd_cmd(0x80);
 779   4              lcd_str("EMPTY");
 780   4                       }*/
 781   4                                              }
 782   3                                              seg=num[cnt];
 783   3                      
 784   3              // delay(10);
 785   3                              }
 786   2                                      arr[cnt]=count;
 787   2                                      count=0;
 788   2                                      TR0=0;
 789   2                                      time=255;       
 790   2                                      buzz=0;
 791   2                                      delay(10);
 792   2                                      buzz=1;
 793   2                                      ledf=1;
 794   2                                      ledb=0;
 795   2                                      lcd_cmd(0x01);
 796   2                                      lcd_cmd(0x80);
 797   2                                      lcd_str("NEXT STATION");
 798   2                                      lcd_cmd(0xc0);
 799   2                                      lcd_str("Haridwar");
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 14  

 800   2                                      stepperb(19);
 801   2              //      delay(10);
 802   2                                      lcd_cmd(0x01);
 803   2                                      lcd_cmd(0x80);
 804   2                                      lcd_str("CURRENT STATION");
 805   2                                      lcd_cmd(0xc0);
 806   2                                      lcd_str("Haridwar");
 807   2                                      while(time>0)
 808   2                                              {
 809   3                                                      TR0=1;
 810   3                                                      x=time/10;
 811   3                      
 812   3                              y=time%10;
 813   3                              lcd_cmd(0xcb);
 814   3                              lcd_data(x+48);
 815   3                                              lcd_data(y+48);
 816   3                                                      if(sense==0)
 817   3                                                      {  
 818   4                                                              if(cnt<9)
 819   4                                                                      cnt++;
 820   4                                                              else
 821   4                                                              {
 822   5                                                                      lcd_cmd(0x01);
 823   5                                                                      lcd_cmd(0x80);
 824   5                                                                      lcd_str("FULL");
 825   5                                                                      buzz=0;
 826   5                                       //delay(10);
 827   5                                                              }       lcd_cmd(0x01);
 828   4                lcd_cmd(0x82);
 829   4                lcd_str("Enter Station code");
 830   4                      lcd_cmd(0xc0);
 831   4                lcd_str("Press key :-");
 832   4                              while(sw1==1)
 833   4                      {
 834   5                              if(enter==0)
 835   5                              {
 836   6                              if(count<5)
 837   6                              {       count++;
 838   7                                              x=count/10;
 839   7              y=count%10;
 840   7              lcd_cmd(0xce);
 841   7              lcd_data(x+48);
 842   7        lcd_data(y+48);
 843   7                                              delay(50);
 844   7                                              
 845   7                              }
 846   6                              else
 847   6                              {
 848   7                              count=0;
 849   7                              }
 850   6                              }
 851   5                      
 852   5      }
 853   4              lcd_cmd(0x01);
 854   4                                      lcd_cmd(0x80);
 855   4                                      lcd_str("CURRENT STATION");
 856   4                                      lcd_cmd(0xc0);
 857   4                                      lcd_str("Haridwar");
 858   4              //seg=num[cnt];
 859   4                                                      }
 860   3                                              if(sw==0)
 861   3                                              {       
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 15  

 862   4                                                      if(cnt>0)
 863   4                                                              cnt--;
 864   4                      /* else
 865   4                       {
 866   4                        lcd_cmd(0x01);
 867   4           lcd_cmd(0x80);
 868   4              lcd_str("EMPTY");
 869   4                       }*/
 870   4                                              }
 871   3                                              seg=num[cnt];
 872   3                      
 873   3              // delay(10);
 874   3                              }
 875   2                              arr[cnt]=count;
 876   2                              count=0;
 877   2                                      TR0=0;
 878   2                                      time=255;
 879   2                                      buzz=0;
 880   2                                      delay(10);
 881   2                                      buzz=1;
 882   2                                      lcd_cmd(0x01);
 883   2                                      lcd_cmd(0x80);
 884   2                                      lcd_str("NEXT STATION");
 885   2                                      lcd_cmd(0xc0);
 886   2                                      lcd_str("Rishikesh");
 887   2                                      stepperb(20);
 888   2              //delay(10);
 889   2                                      lcd_cmd(0x01);
 890   2                                      lcd_cmd(0x80);
 891   2                                      lcd_str("CURRENT STATION");
 892   2                                      lcd_cmd(0xc0);
 893   2                                      lcd_str("Rishikesh");
 894   2                                      while(time>0)
 895   2                                      {
 896   3                                              TR0=1;
 897   3                                              x=time/10;
 898   3                              
 899   3                              y=time%10;
 900   3                              lcd_cmd(0xcb);
 901   3                              lcd_data(x+48);
 902   3                                              lcd_data(y+48);
 903   3      
 904   3                                              if(sense==0)
 905   3                                              {  
 906   4                                                      if(cnt<9)
 907   4                                                      cnt++;
 908   4                                                      else
 909   4                                                      {
 910   5                                                              lcd_cmd(0x01);
 911   5                                                              lcd_cmd(0x80);
 912   5                                                              lcd_str("FULL");
 913   5                                                              buzz=0;
 914   5                                                              delay(10);
 915   5                                                      }
 916   4                                                              lcd_cmd(0x01);
 917   4                lcd_cmd(0x82);
 918   4                lcd_str("Enter Station code");
 919   4                      lcd_cmd(0xc0);
 920   4                lcd_str("Press key :-");
 921   4                              while(sw1==1)
 922   4                      {
 923   5                              if(enter==0)
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 16  

 924   5                              {
 925   6                              if(count<5)
 926   6                              {       count++;
 927   7                                              x=count/10;
 928   7              y=count%10;
 929   7              lcd_cmd(0xce);
 930   7              lcd_data(x+48);
 931   7        lcd_data(y+48);
 932   7                                      delay(50);
 933   7                              
 934   7                              }
 935   6                              else
 936   6                              {
 937   7                              count=0;
 938   7                              }
 939   6                              }   
 940   5              }
 941   4                      lcd_cmd(0x01);
 942   4                                      lcd_cmd(0x80);
 943   4                                      lcd_str("CURRENT STATION");
 944   4                                      lcd_cmd(0xc0);
 945   4                                      lcd_str("Rishikesh");
 946   4                       //seg=num[cnt];
 947   4                                              }
 948   3                                      if(sw==0)
 949   3                                                      {       
 950   4                                                              if(cnt>0)
 951   4                                                              cnt--;
 952   4      /*               else
 953   4                       {
 954   4                        lcd_cmd(0x01);
 955   4           lcd_cmd(0x80);
 956   4              lcd_str("EMPTY");
 957   4                       }*/
 958   4                                                      }
 959   3                                              seg=num[cnt];
 960   3                              
 961   3               delay(2);
 962   3                                      }
 963   2                                      arr[cnt]=count;
 964   2                                      count=0;
 965   2                                              TR0=0;
 966   2                                              time=255;
 967   2      //      lcd_cmd(0x01);
 968   2                                      lcd_cmd(0x80);
 969   2                                      lcd_cmd(0x01);  
 970   2                                      lcd_str("TRAIN STOPS HERE");
 971   2                                      lcd_cmd(0xc0); 
 972   2                                      lcd_str("  THANK YOU");
 973   2                                      cnt=0;
 974   2                      }
 975   1      }       


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   3047    ----
   CONSTANT SIZE    =    207    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     13      19
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.02   DBEXM                                                                 04/26/2013 18:29:22 PAGE 17  

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
